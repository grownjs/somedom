{"version":3,"file":"main.test.iife.min.js","sources":["../src/lib/util.js","../src/lib/attrs.js","../src/lib/node.js","../src/lib/props.js","../src/lib/events.js","../src/index.js","../tests/e2e/main.test.js"],"sourcesContent":["export const isArray = value => Array.isArray(value);\nexport const isFunction = value => typeof value === 'function';\nexport const isUndef = value => typeof value === 'undefined' || value === null;\nexport const isObject = value => value !== null && (typeof value === 'function' || typeof value === 'object');\nexport const isScalar = value => typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean';\n\nexport const isDiff = (prev, next) => {\n  if (isFunction(prev) || isFunction(next) || typeof prev !== typeof next) return true;\n  if (isArray(prev)) {\n    if (prev.length !== next.length) return true;\n    if (prev.some(x => next.indexOf(x) === -1)) return true;\n  } else if (isObject(prev)) {\n    const a = Object.keys(prev).sort();\n    const b = Object.keys(next).sort();\n\n    if (isDiff(a, b)) return true;\n\n    for (let i = 0; i < a.length; i += 1) {\n      if (isDiff(prev[a[i]], next[b[i]])) return true;\n    }\n  } else return prev !== next;\n};\n\nexport const isEmpty = value => {\n  if (isFunction(value)) return false;\n  if (isArray(value)) return value.length === 0;\n  if (isObject(value)) return Object.keys(value).length === 0;\n\n  return typeof value === 'undefined' || value === '' || value === null || value === false;\n};\n\nexport const isNode = x => isArray(x) && x.length <= 3 && (typeof x[0] === 'string' || typeof x[0] === 'function') && !isEmpty(x[0]);\n\nexport const dashCase = value => value.replace(/[A-Z]/g, '-$&').toLowerCase();\nexport const toArray = value => (!isEmpty(value) && !isArray(value) ? [value] : value) || [];\nexport const filter = (value, cb) => value.filter(cb || (x => !isEmpty(x)));\n\nexport const format = value => {\n  const xml = String(value)\n    .replace(/^\\s+|\\s+$/g, '')\n    .replace(/></g, '>\\n<')\n    .replace(/\\/(\\w+)></g, '/$1>\\n<')\n    .replace(/>(.+?)<([a-zA-Z])/g, '>\\n$1\\n<$2');\n\n  const output = xml.split('\\n');\n\n  for (let i = 0, tabs = ''; i < output.length; i += 1) {\n    const line = output[i].replace(/^\\s+|\\s+$/g, '');\n\n    if (/^<[/]/.test(line)) {\n      tabs = tabs.replace('  ', '');\n      output[i] = tabs + line;\n    } else if (/<.*>.*<\\/.*>|<.*[^>]\\/>/.test(line)) {\n      output[i] = tabs + line;\n    } else {\n      output[i] = tabs + line;\n      tabs += '  ';\n    }\n  }\n\n  return output.join('\\n');\n};\n\nexport const trim = value => {\n  const matches = value.match(/\\n( )*/);\n  const spaces = matches[0].substr(0, matches[0].length - 1);\n  const depth = spaces.split('').length;\n\n  return value.replace(new RegExp(`^ {${depth}}`, 'mg'), '').trim();\n};\n\nexport const zipMap = (a, b, cb) => Array.from({ length: Math.max(a.length, b.length) }).map((_, i) => cb(a[i], b[i], i));\nexport const apply = (cb, length, options = {}) => (...args) => length === args.length && cb(...args, options);\nexport const raf = cb => ((typeof window !== 'undefined' && window.requestAnimationFrame) || setTimeout)(cb);\n\nexport const replace = (target, node, i) => target.replaceChild(node, target.childNodes[i]);\nexport const remove = (target, node) => target && target.removeChild(node);\nexport const append = (target, node) => target.appendChild(node);\nexport const detach = target => remove(target.parentNode, target);\n","import {\n  isEmpty, isObject, isFunction, isScalar, isDiff, isNode, isArray, toArray,\n} from './util';\n\nexport const XLINK_NS = 'http://www.w3.org/1999/xlink';\nexport const ELEM_REGEX = /(\\w*)(#[\\w-]+)?([\\w.-]+)?/;\n\nexport function fixTree(vnode) {\n  vnode = isNode(vnode) && isFunction(vnode[0])\n    ? fixTree(vnode[0](vnode[1], toArray(vnode[2])))\n    : vnode;\n\n  if (isArray(vnode[2])) {\n    vnode[2].forEach((sub, i) => {\n      if (isNode(sub)) {\n        vnode[2][i] = fixTree(sub);\n      }\n    });\n  }\n\n  return vnode;\n}\n\nexport function fixProps(vnode) {\n  if (isArray(vnode[1]) || isScalar(vnode[1])) {\n    vnode[2] = vnode[1];\n    vnode[1] = null;\n  }\n\n  if (isFunction(vnode[0])) {\n    vnode = fixProps(vnode[0](vnode[1], toArray(vnode[2])));\n  }\n\n  if (!isNode(vnode)) throw new Error(`Invalid vnode, given '${vnode}'`);\n\n  const matches = vnode[0].match(ELEM_REGEX);\n  const name = matches[1] || 'div';\n  const attrs = { ...vnode[1] };\n\n  if (matches[2]) {\n    attrs.id = matches[2].substr(1);\n  }\n\n  if (matches[3]) {\n    const classes = matches[3].substr(1).split('.');\n\n    if (isArray(attrs.class) || isScalar(attrs.class)) {\n      attrs.class = !isArray(attrs.class) ? attrs.class.split(/\\W/) : attrs.class;\n      attrs.class = classes.concat(attrs.class).reduce((prev, cur) => {\n        if (prev.indexOf(cur) === -1) prev.push(cur);\n        return prev;\n      }, []);\n    } else if (isObject(attrs.class)) {\n      classes.forEach(x => { attrs.class[x] = 1; });\n    } else {\n      attrs.class = classes;\n    }\n  }\n\n  return [name, attrs, toArray(vnode[2])];\n}\n\nexport function assignProps(target, attrs, svg, cb) {\n  Object.keys(attrs).forEach(prop => {\n    if (prop === 'key' || isObject(attrs[prop])) {\n      attrs[prop] = (isFunction(cb) && cb(target, prop, attrs[prop])) || null;\n\n      if (prop === 'key') return;\n    }\n\n    const removed = isEmpty(attrs[prop]);\n    const value = attrs[prop] === true ? prop : attrs[prop];\n    const name = prop.replace(/^xlink:?/, '');\n\n    if (svg && prop !== name) {\n      if (removed) target.removeAttributeNS(XLINK_NS, name);\n      else target.setAttributeNS(XLINK_NS, name, value);\n      return;\n    }\n\n    if (removed) target.removeAttribute(prop);\n    else target.setAttribute(prop, value);\n  });\n}\n\nexport function updateProps(target, prev, next, svg, cb) {\n  let changed;\n\n  const keys = Object.keys(prev).concat(Object.keys(next));\n  const props = keys.reduce((all, k) => {\n    if (k in prev && !(k in next)) {\n      all[k] = null;\n      changed = true;\n    } else if (isDiff(prev[k], next[k])) {\n      all[k] = next[k];\n      changed = true;\n    }\n\n    return all;\n  }, {});\n\n  if (changed) assignProps(target, props, svg, cb);\n\n  return changed;\n}\n","import {\n  isFunction, isScalar, isNode, isEmpty, isUndef, isDiff, append, replace, detach, zipMap,\n} from './util';\n\nimport {\n  assignProps, updateProps, fixProps, fixTree,\n} from './attrs';\n\nexport const SVG_NS = 'http://www.w3.org/2000/svg';\n\nexport function destroyElement(target, wait = cb => cb()) {\n  return Promise.resolve().then(() => wait(() => target.remove()));\n}\n\nexport function createElement(value, svg, cb) {\n  if (isFunction(value)) return value(svg, cb);\n  if (isScalar(value)) return document.createTextNode(value);\n  if (isUndef(value)) throw new TypeError(`Empty or invalid node, given '${value}'`);\n  if (!isNode(value)) return value;\n\n  const [tag, attrs, children] = fixProps([...value]);\n  const isSvg = svg || tag === 'svg';\n\n  let el = isSvg\n    ? document.createElementNS(SVG_NS, tag)\n    : document.createElement(tag);\n\n  if (isFunction(cb)) {\n    el = cb(el, tag, attrs, children) || el;\n  }\n\n  if (isFunction(el)) return createElement(el(), isSvg, cb);\n  if (!isEmpty(attrs)) assignProps(el, attrs, isSvg, cb);\n  if (isFunction(el.oncreate)) el.oncreate(el);\n  if (isFunction(el.enter)) el.enter();\n\n  el.remove = () => Promise.resolve()\n    .then(() => isFunction(el.ondestroy) && el.ondestroy(el))\n    .then(() => isFunction(el.teardown) && el.teardown())\n    .then(() => isFunction(el.exit) && el.exit())\n    .then(() => detach(el));\n\n  children.forEach(vnode => {\n    if (!isEmpty(vnode)) el.appendChild(createElement(vnode, isSvg, cb));\n  });\n\n  return el;\n}\n\nexport function mountElement(target, view, cb = createElement) {\n  if (typeof view === 'function') {\n    cb = view;\n    view = target;\n    target = undefined;\n  }\n\n  if (!view) {\n    view = target;\n    target = undefined;\n  }\n\n  if (!target) {\n    target = document.body;\n  }\n\n  if (typeof target === 'string') {\n    target = document.querySelector(target);\n  }\n\n  const el = isScalar(view) || isNode(view) ? cb(view) : view;\n\n  append(target, el);\n\n  return el;\n}\n\nexport function updateElement(target, prev, next, svg, cb, i = 0) {\n  if (i === null) {\n    const a = fixProps([...prev]);\n    const b = fixProps([...next]);\n\n    if (updateProps(target, a[1], b[1], svg, cb)) {\n      if (isFunction(target.onupdate)) target.onupdate(target);\n      if (isFunction(target.update)) target.update();\n    }\n\n    zipMap(a[2], b[2], (x, y, z) => updateElement(target, x, y, svg, cb, z));\n  } else if (isScalar(prev) && isScalar(next)) {\n    if (isDiff(prev, next)) {\n      target.childNodes[i].nodeValue = next;\n    }\n  } else if (!prev && next) append(target, createElement(next, svg, cb));\n  else if (prev && !next) destroyElement(target.childNodes[i]);\n  else if (prev[0] !== next[0]) {\n    if (isNode(prev) && isNode(next)) replace(target, createElement(next, svg, cb), i);\n    else zipMap(prev, next, (x, y, z) => updateElement(target, x, y, svg, cb, z));\n  } else updateElement(target.childNodes[i], prev, next, svg, cb, null);\n}\n\nexport function createView(tag, state, actions) {\n  return (el, cb = createElement) => {\n    const data = { ...state };\n\n    let childNode;\n    let vnode;\n\n    const $ = Object.keys(actions)\n      .reduce((prev, cur) => {\n        prev[cur] = (...args) => Promise.resolve()\n          .then(() => actions[cur](...args)(data))\n          .then(result => Object.assign(data, result))\n          .then(newData => {\n            updateElement(childNode, vnode, vnode = fixTree(tag(newData, $)), null, cb, null);\n          });\n\n        return prev;\n      }, {});\n\n    childNode = mountElement(el, vnode = fixTree(tag(data, $)), cb);\n\n    $.unmount = () => destroyElement(childNode);\n    $.target = childNode;\n\n    return $;\n  };\n}\n","import {\n  dashCase, isFunction, isObject, isScalar, isArray, isUndef, filter, raf,\n} from './util';\n\nexport function values(attrs, cb) {\n  if (isUndef(attrs)) return [];\n  if (!isObject(attrs)) return attrs;\n  if (isArray(attrs)) return filter(attrs);\n\n  return filter(Object.keys(attrs).reduce((prev, cur) => {\n    if (!isUndef(attrs[cur])) prev.push(cb(attrs[cur], cur));\n\n    return prev;\n  }, []));\n}\n\nexport function styles(props) {\n  return values(props, (v, k) => `${dashCase(k)}: ${v}`, '; ');\n}\n\nexport function classes(props) {\n  return values(props, (v, k) => (v ? k : undefined));\n}\n\nexport function datasets(el, name, props) {\n  if (isArray(props)) {\n    el.setAttribute(`data-${name}`, JSON.stringify(props));\n  } else if (!isFunction(props)) {\n    Object.keys(props).forEach(key => {\n      const value = !isScalar(props[key])\n        ? JSON.stringify(props[key])\n        : props[key];\n\n      el.setAttribute(`${name !== 'data' ? 'data-' : ''}${name}-${key}`, value);\n    });\n  }\n}\n\nexport function nextProps(el, type, names) {\n  return () => new Promise(resolve => {\n    let t;\n\n    function onEnd() {\n      el.removeEventListener('animationend', onEnd);\n\n      names.map(x => el.classList.remove(x));\n\n      clearTimeout(t);\n      resolve();\n    }\n\n    t = setTimeout(onEnd, 500);\n\n    el.addEventListener('animationend', onEnd);\n\n    raf(() => { names.map(x => el.classList.add(x)); });\n  });\n}\n\nexport function invokeProps(el, name, value, helpers) {\n  if (isObject(helpers)) {\n    if (isFunction(helpers)) return helpers(value, name, el);\n    if (isFunction(helpers[name])) return helpers[name](value, name, el);\n  }\n\n  if (isObject(value)) datasets(el, name, value);\n}\n\nexport const applyStyles = value => styles(value).join('; ');\nexport const applyClasses = value => classes(value).join(' ');\nexport const applyAnimations = (value, name, el) => { el[name] = nextProps(el, name, classes(value)); };\n","import { isFunction, isObject } from './util';\n\nexport const EE_SUPPORTED = ['oncreate', 'onupdate', 'ondestroy'];\n\nexport function eventListener(e) {\n  return e.currentTarget.events[e.type](e);\n}\n\nexport function invokeEvent(e, name, value, globals) {\n  let skip;\n\n  if (isObject(globals)) {\n    if (isFunction(globals)) {\n      skip = globals(name, e) === false;\n    } else if (isFunction(globals[name])) {\n      skip = globals[name](e) === false;\n    }\n  }\n\n  if (!skip) value(e);\n}\n\nexport function addEvents(el, name, value, globals) {\n  if (isFunction(value)) {\n    el.events = el.events || {};\n\n    if (!el.teardown) {\n      el.teardown = () => Object.keys(el.events).map(x => el.removeEventListener(x, eventListener));\n    }\n\n    if (name.substr(0, 2) === 'on' && EE_SUPPORTED.indexOf(name) === -1) {\n      const type = name.substr(2);\n\n      if (!el.events[type]) el.addEventListener(type, eventListener, false);\n\n      el.events[type] = e => invokeEvent(e, name, value, globals);\n    } else {\n      (EE_SUPPORTED.indexOf(name) > -1 ? el : el.events)[name] = value;\n    }\n  }\n}\n","import {\n  createView as view,\n  mountElement as mount,\n  updateElement as patch,\n  createElement as render,\n  destroyElement as unmount,\n} from './lib/node';\n\nimport {\n  invokeProps,\n  applyStyles as styles,\n  applyClasses as classes,\n  applyAnimations as animation,\n} from './lib/props';\n\nimport {\n  apply, format, filter, isFunction,\n} from './lib/util';\n\nimport { addEvents } from './lib/events';\n\nexport const h = (name, attrs, ...children) => [name, attrs, children];\n\nexport const pre = (vnode, svg, cb = render) => {\n  return cb(['pre', { class: 'highlight' }, format(cb(vnode, svg).outerHTML)], svg);\n};\n\nexport const bind = (tag, ...hooks) => {\n  const cbs = filter(hooks, isFunction);\n\n  const mix = (...args) => {\n    return cbs.reduce((prev, cb) => cb(...args) || prev, undefined);\n  };\n\n  return (...args) => (args.length <= 2 ? tag(args[0], args[1], mix) : mix(...args));\n};\n\nexport const listeners = opts => apply(addEvents, 3, opts);\nexport const attributes = opts => apply(invokeProps, 3, opts);\n\nexport {\n  createView as view,\n  mountElement as mount,\n  updateElement as patch,\n  createElement as render,\n  destroyElement as unmount,\n} from './lib/node';\n\nexport {\n  applyStyles as styles,\n  applyClasses as classes,\n  applyAnimations as animation,\n} from './lib/props';\n\nexport default {\n  h,\n  pre,\n  bind,\n\n  view,\n  mount,\n  patch,\n  render,\n  unmount,\n\n  listeners,\n  attributes,\n\n  styles,\n  classes,\n  animation,\n};\n","import somedom, { mount, render } from '../../src';\nimport { trim as format } from '../../src/lib/util';\n\nfunction summarize(script) {\n  const { innerHTML, parentNode } = script;\n\n  const code = innerHTML\n    .replace(/( +)appendChild\\(([^;]*?)\\);?/gm, '$1$2')\n    .replace(/test\\(\\s*\\([^=()]*\\)\\s*=>\\s*\\{/, '')\n    .replace(/\\}\\)\\s*;$/, '');\n\n  mount(parentNode, ['details', [\n    ['summary', 'View executed code'],\n    ['pre', { class: 'highlight' }, format(code)],\n  ]]);\n}\n\nfunction appendChild(currentScript, newNode) {\n  const { loaded, parentNode } = currentScript;\n\n  if (!loaded) {\n    summarize(currentScript);\n\n    currentScript.loaded = true;\n  }\n\n  if (newNode) {\n    parentNode.insertBefore(newNode, currentScript);\n  }\n\n  return newNode;\n}\n\nconst tests = [];\n\nwindow.test = cb => {\n  tests.push({\n    cb,\n    el: document.currentScript,\n  });\n};\n\nwindow.addEventListener('DOMContentLoaded', () => {\n  tests.forEach(t => {\n    try {\n      t.cb(somedom, x => appendChild(t.el, x));\n    } catch (e) {\n      appendChild(t.el, render(['div', { class: 'error' }, e.toString()]));\n    }\n  });\n\n  window.hijs = '.highlight';\n\n  mount('head', ['script', { src: '//cdn.rawgit.com/cloudhead/hijs/0eaa0031/hijs.js' }]);\n});\n"],"names":["const","isArray","value","Array","isFunction","isUndef","isObject","isScalar","isDiff","prev","next","length","some","x","indexOf","a","Object","keys","sort","b","let","i","isEmpty","isNode","dashCase","replace","toLowerCase","toArray","filter","cb","format","output","String","split","tabs","line","test","join","trim","matches","match","depth","substr","RegExp","zipMap","from","Math","max","map","_","apply","options","args","raf","window","requestAnimationFrame","setTimeout","target","node","replaceChild","childNodes","append","appendChild","detach","removeChild","remove","parentNode","XLINK_NS","ELEM_REGEX","fixTree","vnode","forEach","sub","fixProps","Error","name","attrs","id","classes","class","concat","reduce","cur","push","assignProps","svg","prop","removed","removeAttributeNS","setAttributeNS","removeAttribute","setAttribute","SVG_NS","destroyElement","wait","Promise","resolve","then","createElement","document","createTextNode","TypeError","isSvg","tag","el","createElementNS","children","oncreate","enter","ondestroy","teardown","exit","mountElement","view","undefined","body","querySelector","updateElement","changed","props","all","k","updateProps","onupdate","update","y","z","nodeValue","values","v","invokeProps","helpers","JSON","stringify","key","datasets","EE_SUPPORTED","eventListener","e","currentTarget","events","type","addEvents","globals","removeEventListener","addEventListener","skip","invokeEvent","render","outerHTML","cbs","hooks","mix","state","actions","childNode","data","$","result","assign","newData","unmount","mount","patch","opts","names","t","onEnd","classList","clearTimeout","add","nextProps","currentScript","newNode","loaded","script","code","innerHTML","summarize","insertBefore","tests","somedom","toString","hijs","src"],"mappings":"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"}