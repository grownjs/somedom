{"version":3,"file":"sandbox.iife.min.js","sources":["../src/lib/util.js","../src/lib/attrs.js","../src/lib/node.js","../src/lib/props.js","../src/lib/events.js","../src/index.js","../tests/e2e/main.test.js"],"sourcesContent":["export const isArray = value => Array.isArray(value);\nexport const isFunction = value => typeof value === 'function';\nexport const isUndef = value => typeof value === 'undefined' || value === null;\nexport const isObject = value => value !== null && (typeof value === 'function' || typeof value === 'object');\nexport const isScalar = value => typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean';\n\nexport const isDiff = (prev, next) => {\n  if (typeof prev !== typeof next) return true;\n  if (isArray(prev)) {\n    if (prev.length !== next.length) return true;\n    if (prev.some(x => next.indexOf(x) === -1)) return true;\n  } else if (isObject(prev)) {\n    const a = Object.keys(prev).sort();\n    const b = Object.keys(next).sort();\n\n    if (isDiff(a, b)) return true;\n\n    for (let i = 0; i < a.length; i += 1) {\n      if (isDiff(prev[a[i]], next[b[i]])) return true;\n    }\n  } else return prev !== next;\n};\n\nexport const isEmpty = value => {\n  if (isArray(value)) return value.length === 0;\n  if (isObject(value)) return Object.keys(value).length === 0;\n\n  return typeof value === 'undefined' || value === '' || value === null || value === false;\n};\n\nexport const isNode = x => isArray(x) && x.length <= 3 && (typeof x[0] === 'string' || typeof x[0] === 'function') && !isEmpty(x[0]);\n\nexport const dashCase = value => value.replace(/[A-Z]/g, '-$&').toLowerCase();\nexport const toArray = value => (!isEmpty(value) && !isArray(value) ? [value] : value) || [];\nexport const filter = (value, cb) => value.filter(cb || (x => !isEmpty(x)));\n\nexport const format = value => {\n  const xml = String(value)\n    .replace(/^\\s+|\\s+$/g, '')\n    .replace(/></g, '>\\n<')\n    .replace(/\\/(\\w+)></g, '/$1>\\n<')\n    .replace(/>(.+?)<([a-zA-Z])/g, '>\\n$1\\n<$2');\n\n  const output = xml.split('\\n');\n\n  for (let i = 0, tabs = ''; i < output.length; i += 1) {\n    const line = output[i].replace(/^\\s+|\\s+$/g, '');\n\n    if (/^<[/]/.test(line)) {\n      tabs = tabs.replace('  ', '');\n      output[i] = tabs + line;\n    } else if (/<.*>.*<\\/.*>|<.*[^>]\\/>/.test(line)) {\n      output[i] = tabs + line;\n    } else {\n      output[i] = tabs + line;\n      tabs += '  ';\n    }\n  }\n\n  return output.join('\\n');\n};\n\nexport const trim = value => {\n  const matches = value.match(/\\n( )*/);\n  const spaces = matches[0].substr(0, matches[0].length - 1);\n  const depth = spaces.split('').length;\n\n  return value.replace(new RegExp(`^ {${depth}}`, 'mg'), '').trim();\n};\n\nexport const zipMap = (a, b, cb) => Promise.all(Array.from({ length: Math.max(a.length, b.length) }).map((_, i) => cb(a[i], b[i], i)));\nexport const apply = (cb, length, options = {}) => (...args) => length === args.length && cb(...args, options);\nexport const raf = cb => ((typeof window !== 'undefined' && window.requestAnimationFrame) || setTimeout)(cb);\n\nexport const replace = (target, node, i) => target.replaceChild(node, target.childNodes[i]);\nexport const remove = (target, node) => target && target.removeChild(node);\nexport const append = (target, node) => target.appendChild(node);\nexport const detach = target => remove(target.parentNode, target);\n","import {\n  isEmpty, isObject, isFunction, isScalar, isDiff, isArray, toArray,\n} from './util';\n\nexport const XLINK_NS = 'http://www.w3.org/1999/xlink';\nexport const ELEM_REGEX = /(\\w*)(#\\w+)?([\\w.]+)?/;\n\nexport function fixProps(vnode) {\n  if (isArray(vnode[1]) || isScalar(vnode[1])) {\n    vnode[2] = vnode[1];\n    vnode[1] = null;\n  }\n\n  let attrs = vnode[1] || null;\n  let name = vnode[0];\n\n  if (typeof name === 'string') {\n    const matches = name.match(ELEM_REGEX);\n\n    attrs = attrs || {};\n    name = matches[1] || ((matches[2] || matches[3]) ? 'div' : null);\n\n    if (matches[2]) {\n      attrs.id = matches[2].substr(1);\n    }\n\n    if (matches[3]) {\n      const classes = matches[3].substr(1).split('.');\n\n      if (isObject(attrs.class)) {\n        classes.forEach(x => { attrs.class[x] = 1; });\n      } else if (isArray(attrs.class) || isScalar(attrs.class)) {\n        attrs.class = classes.concat(attrs.class);\n      } else {\n        attrs.class = classes.join(' ');\n      }\n    }\n  }\n\n  return [name, attrs, toArray(vnode[2])];\n}\n\nexport function assignProps(target, attrs, svg, cb) {\n  Object.keys(attrs).forEach(prop => {\n    if (prop === 'key' || isObject(attrs[prop])) {\n      attrs[prop] = (isFunction(cb) && cb(target, prop, attrs[prop])) || null;\n\n      if (prop === 'key') return;\n    }\n\n    const removed = isEmpty(attrs[prop]);\n    const value = attrs[prop] === true ? prop : attrs[prop];\n    const name = prop.replace(/^xlink:?/, '');\n\n    if (svg && prop !== name) {\n      if (removed) target.removeAttributeNS(XLINK_NS, name);\n      else target.setAttributeNS(XLINK_NS, name, value);\n      return;\n    }\n\n    if (removed) target.removeAttribute(prop);\n    else target.setAttribute(prop, value);\n  });\n}\n\nexport function updateProps(target, prev, next, svg, cb) {\n  let changed;\n\n  const keys = Object.keys(prev).concat(Object.keys(next));\n  const props = keys.reduce((all, k) => {\n    if (k in prev && !(k in next)) {\n      all[k] = null;\n      changed = true;\n    } else if (isDiff(prev[k], next[k])) {\n      all[k] = next[k];\n      changed = true;\n    }\n\n    return all;\n  }, {});\n\n  if (changed) assignProps(target, props, svg, cb);\n\n  return changed;\n}\n","import {\n  isFunction, isScalar, isArray, isNode, isEmpty, isUndef, isDiff, append, replace, detach, zipMap,\n} from './util';\n\nimport { assignProps, updateProps, fixProps } from './attrs';\n\nexport const SVG_NS = 'http://www.w3.org/2000/svg';\n\nexport function destroyElement(target, wait = cb => cb()) {\n  return Promise.resolve().then(() => wait(() => target.remove()));\n}\n\nexport function createElement(value, svg, cb) {\n  if (isScalar(value)) return document.createTextNode(value);\n  if (isUndef(value)) throw new TypeError(`Empty or invalid node, given '${value}'`);\n  if (!isNode(value)) return;\n\n  const [tag, attrs, children] = fixProps([...value]);\n  const isSvg = svg || tag === 'svg';\n\n  let el;\n\n  if (typeof tag === 'string') {\n    el = isSvg ? document.createElementNS(SVG_NS, tag) : document.createElement(tag);\n  }\n\n  if (isFunction(cb)) {\n    el = cb(el, tag, attrs, children) || el;\n  }\n\n  if (isFunction(el)) return createElement(el(), isSvg, cb);\n\n  if (!el && isFunction(tag)) {\n    el = tag(attrs, children);\n\n    if (isScalar(el) || isArray(el)) {\n      el = createElement(el, svg, cb);\n    }\n\n    return el;\n  }\n\n  if (!isEmpty(attrs)) assignProps(el, attrs, isSvg, cb);\n  if (isFunction(el.oncreate)) el.oncreate(el);\n  if (isFunction(el.enter)) el.enter();\n\n  el.remove = () => Promise.resolve()\n    .then(() => isFunction(el.ondestroy) && el.ondestroy(el))\n    .then(() => isFunction(el.teardown) && el.teardown())\n    .then(() => isFunction(el.exit) && el.exit())\n    .then(() => detach(el));\n\n  children.map(vnode => !isEmpty(vnode) && el.appendChild(createElement(vnode, isSvg, cb)));\n\n  return el;\n}\n\nexport function mountElement(target, view, cb = createElement) {\n  if (typeof view === 'function') {\n    cb = view;\n    view = target;\n    target = undefined;\n  }\n\n  if (!view) {\n    view = target;\n    target = undefined;\n  }\n\n  if (!target) {\n    target = document.body;\n  }\n\n  if (typeof target === 'string') {\n    target = document.querySelector(target);\n  }\n\n  const el = isScalar(view) || isNode(view) ? cb(view) : view;\n\n  append(target, el);\n\n  return el;\n}\n\nexport function updateElement(target, prev, next, svg, cb, i = 0) {\n  if (i === null) {\n    const a = fixProps([...prev]);\n    const b = fixProps([...next]);\n    const c = updateProps(target, a[1], b[1], svg, cb);\n\n    return Promise.resolve()\n      .then(c && Promise.resolve()\n        .then(() => isFunction(target.onupdate) && target.onupdate(target))\n        .then(() => isFunction(target.update) && target.update()))\n      .then(() => zipMap(a[2], b[2], (x, y, z) => updateElement(target, x, y, svg, cb, z)));\n  }\n\n  return Promise.resolve().then(() => {\n    if (isScalar(prev) && isScalar(next)) {\n      if (isDiff(prev, next)) {\n        target.childNodes[i].nodeValue = next;\n      }\n    } else if (!prev && next) mountElement(target, next, cb);\n    else if (prev && !next) return destroyElement(target.childNodes[i]);\n    else if (prev[0] !== next[0]) replace(target, createElement(next, svg, cb), i);\n    else return updateElement(target.childNodes[i], prev, next, svg, cb, null);\n  });\n}\n\nexport function createView(tag, state, actions) {\n  return (el, cb = createElement) => {\n    const data = { ...state };\n\n    let childNode;\n    let vnode;\n\n    const $ = Object.keys(actions)\n      .reduce((prev, cur) => {\n        prev[cur] = (...args) => Promise.resolve()\n          .then(() => actions[cur](...args)(data))\n          .then(result => Object.assign(data, result))\n          .then(newData => updateElement(childNode, vnode, vnode = tag(newData, $), null, cb, null)); // eslint-disable-line\n\n        return prev;\n      }, {});\n\n    childNode = mountElement(el, vnode = tag(data, $), cb);\n\n    $.unmount = () => destroyElement(childNode);\n    $.target = childNode;\n\n    return $;\n  };\n}\n","import {\n  dashCase, isFunction, isObject, isScalar, isArray, isUndef, filter, raf,\n} from './util';\n\nexport function values(attrs, cb) {\n  if (isUndef(attrs)) return [];\n  if (!isObject(attrs)) return attrs;\n  if (isArray(attrs)) return filter(attrs);\n\n  return filter(Object.keys(attrs).reduce((prev, cur) => {\n    if (!isUndef(attrs[cur])) prev.push(cb(attrs[cur], cur));\n\n    return prev;\n  }, []));\n}\n\nexport function styles(props) {\n  return values(props, (v, k) => `${dashCase(k)}: ${v}`, '; ');\n}\n\nexport function classes(props) {\n  return values(props, (v, k) => (v ? k : undefined));\n}\n\nexport function datasets(el, name, props) {\n  if (isArray(props)) {\n    el.setAttribute(`data-${name}`, JSON.stringify(props));\n  } else {\n    Object.keys(props).forEach(key => {\n      const value = !isScalar(props[key])\n        ? JSON.stringify(props[key])\n        : props[key];\n\n      el.setAttribute(`data-${name}-${key}`, value);\n    });\n  }\n}\n\nexport function nextProps(el, type, names) {\n  return () => new Promise(resolve => {\n    let t;\n\n    function onEnd() {\n      el.removeEventListener('animationend', onEnd);\n\n      names.map(x => el.classList.remove(x));\n\n      clearTimeout(t);\n      resolve();\n    }\n\n    t = setTimeout(onEnd, 500);\n\n    el.addEventListener('animationend', onEnd);\n\n    raf(() => { names.map(x => el.classList.add(x)); });\n  });\n}\n\nexport function invokeProps(el, name, value, helpers) {\n  if (isObject(helpers)) {\n    if (isFunction(helpers)) return helpers(value, name, el);\n    if (isFunction(helpers[name])) return helpers[name](value, name, el);\n  }\n\n  if (isObject(value)) datasets(el, name, value);\n}\n\nexport const applyStyles = value => styles(value).join('; ');\nexport const applyClasses = value => classes(value).join(' ');\nexport const applyAnimations = (value, name, el) => { el[name] = nextProps(el, name, classes(value)); };\n","import { isFunction, isObject } from './util';\n\nexport const EE_SUPPORTED = ['oncreate', 'onupdate', 'ondestroy'];\n\nexport function eventListener(e) {\n  return e.currentTarget.events[e.type](e);\n}\n\nexport function invokeEvent(e, name, value, globals) {\n  let skip;\n\n  if (isObject(globals)) {\n    if (isFunction(globals)) {\n      skip = globals(name, e) === false;\n    } else if (isFunction(globals[name])) {\n      skip = globals[name](e) === false;\n    }\n  }\n\n  if (!skip) value(e);\n}\n\nexport function addEvents(el, name, value, globals) {\n  if (isFunction(value)) {\n    el.events = el.events || {};\n\n    if (!el.teardown) {\n      el.teardown = () => Object.keys(el.events).map(x => el.removeEventListener(x, eventListener));\n    }\n\n    if (name.substr(0, 2) === 'on' && EE_SUPPORTED.indexOf(name) === -1) {\n      if (typeof window !== 'undefined' && !(name in window)) {\n        throw new Error(`Unknown event '${name}'`);\n      }\n\n      const type = name.substr(2);\n\n      if (!el.events[type]) el.addEventListener(type, eventListener, false);\n\n      el.events[type] = value && (e => invokeEvent(e, name, value, globals));\n    } else {\n      (EE_SUPPORTED.indexOf(name) > -1 ? el : el.events)[name] = value;\n    }\n  }\n}\n","import {\n  createView as view,\n  mountElement as mount,\n  updateElement as patch,\n  createElement as render,\n  destroyElement as unmount,\n} from './lib/node';\n\nimport {\n  invokeProps,\n  applyStyles as styles,\n  applyClasses as classes,\n  applyAnimations as animation,\n} from './lib/props';\n\nimport {\n  apply, format, filter, isFunction,\n} from './lib/util';\n\nimport { addEvents } from './lib/events';\n\nexport const h = (name = 'div', attrs, ...children) => [name, attrs, children];\n\nexport const pre = (vnode, svg, cb = render) => {\n  return cb(['pre', { class: 'highlight' }, format(cb(vnode, svg).outerHTML)], svg);\n};\n\nexport const bind = (tag, ...hooks) => {\n  const cbs = filter(hooks, isFunction);\n\n  const mix = (...args) => {\n    return cbs.reduce((prev, cb) => cb(...args) || prev, undefined);\n  };\n\n  return (...args) => (args.length <= 2 ? tag(args[0], args[1], mix) : mix(...args));\n};\n\nexport const listeners = opts => apply(addEvents, 3, opts);\nexport const attributes = opts => apply(invokeProps, 3, opts);\n\nexport {\n  createView as view,\n  mountElement as mount,\n  updateElement as patch,\n  createElement as render,\n  destroyElement as unmount,\n} from './lib/node';\n\nexport {\n  applyStyles as styles,\n  applyClasses as classes,\n  applyAnimations as animation,\n} from './lib/props';\n\nexport default {\n  h,\n  pre,\n  bind,\n\n  view,\n  mount,\n  patch,\n  render,\n  unmount,\n\n  listeners,\n  attributes,\n\n  styles,\n  classes,\n  animation,\n};\n","import somedom, { mount, render } from '../../src';\nimport { trim as format } from '../../src/lib/util';\n\nfunction summarize(script) {\n  const { innerHTML, parentNode } = script;\n\n  const code = innerHTML\n    .replace(/( +)appendChild\\(([^;]*?)\\);?/gm, '$1$2')\n    .replace(/test\\(\\s*\\([^=()]*\\)\\s*=>\\s*\\{/, '')\n    .replace(/\\}\\)\\s*;$/, '');\n\n  mount(parentNode, ['details', [\n    ['summary', 'View executed code'],\n    ['pre', { class: 'highlight' }, format(code)],\n  ]]);\n}\n\nfunction appendChild(currentScript, newNode) {\n  const { loaded, parentNode } = currentScript;\n\n  if (!loaded) {\n    summarize(currentScript);\n\n    currentScript.loaded = true;\n  }\n\n  if (newNode) {\n    parentNode.insertBefore(newNode, currentScript);\n  }\n\n  return newNode;\n}\n\nconst tests = [];\n\nwindow.test = cb => {\n  tests.push({\n    cb,\n    el: document.currentScript,\n  });\n};\n\nwindow.addEventListener('DOMContentLoaded', () => {\n  tests.forEach(t => {\n    try {\n      t.cb(somedom, x => appendChild(t.el, x));\n    } catch (e) {\n      appendChild(t.el, render(['div.error', e.toString()]));\n    }\n  });\n\n  window.hijs = '.highlight';\n\n  mount('head', ['script', { src: '//cdn.rawgit.com/cloudhead/hijs/0eaa0031/hijs.js' }]);\n});\n"],"names":["const","isArray","value","Array","isFunction","isUndef","isObject","isScalar","isDiff","prev","next","length","some","x","indexOf","a","Object","keys","sort","b","let","i","isEmpty","isNode","dashCase","replace","toLowerCase","toArray","filter","cb","trim","matches","match","depth","substr","split","RegExp","zipMap","Promise","all","from","Math","max","map","_","apply","options","args","raf","window","requestAnimationFrame","setTimeout","target","node","replaceChild","childNodes","append","appendChild","detach","removeChild","remove","parentNode","ELEM_REGEX","fixProps","vnode","attrs","name","id","classes","class","forEach","concat","join","assignProps","svg","prop","removed","removeAttributeNS","XLINK_NS","setAttributeNS","removeAttribute","setAttribute","SVG_NS","destroyElement","wait","resolve","then","createElement","document","createTextNode","TypeError","el","isSvg","tag","createElementNS","children","oncreate","enter","ondestroy","teardown","exit","mountElement","view","undefined","body","querySelector","updateElement","c","changed","props","reduce","k","updateProps","onupdate","update","y","z","nodeValue","values","cur","push","v","invokeProps","helpers","JSON","stringify","key","datasets","EE_SUPPORTED","eventListener","e","currentTarget","events","type","addEvents","globals","removeEventListener","Error","addEventListener","skip","invokeEvent","render","output","String","tabs","line","test","format","outerHTML","cbs","hooks","mix","state","actions","childNode","data","$","result","assign","newData","unmount","mount","patch","opts","names","t","onEnd","classList","clearTimeout","add","nextProps","currentScript","newNode","loaded","script","code","innerHTML","summarize","insertBefore","tests","somedom","toString","hijs","src"],"mappings":"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"}