{"version":3,"file":"sandbox.iife.min.js","sources":["../src/lib/util.js","../src/lib/attrs.js","../src/lib/node.js","../src/lib/props.js","../src/lib/events.js","../src/index.js","../tests/e2e/main.test.js"],"sourcesContent":["export const isArray = value => Array.isArray(value);\nexport const isFunction = value => typeof value === 'function';\nexport const isUndef = value => typeof value === 'undefined' || value === null;\nexport const isObject = value => value !== null && (typeof value === 'function' || typeof value === 'object');\nexport const isScalar = value => typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean';\n\nexport const isDiff = (prev, next) => {\n  if (isFunction(prev) || isFunction(next) || typeof prev !== typeof next) return true;\n  if (isArray(prev)) {\n    if (prev.length !== next.length) return true;\n    if (prev.some(x => next.indexOf(x) === -1)) return true;\n  } else if (isObject(prev)) {\n    const a = Object.keys(prev).sort();\n    const b = Object.keys(next).sort();\n\n    if (isDiff(a, b)) return true;\n\n    for (let i = 0; i < a.length; i += 1) {\n      if (isDiff(prev[a[i]], next[b[i]])) return true;\n    }\n  } else return prev !== next;\n};\n\nexport const isEmpty = value => {\n  if (isFunction(value)) return false;\n  if (isArray(value)) return value.length === 0;\n  if (isObject(value)) return Object.keys(value).length === 0;\n\n  return typeof value === 'undefined' || value === '' || value === null || value === false;\n};\n\nexport const isNode = x => isArray(x) && x.length <= 3 && (typeof x[0] === 'string' || typeof x[0] === 'function') && !isEmpty(x[0]);\n\nexport const dashCase = value => value.replace(/[A-Z]/g, '-$&').toLowerCase();\nexport const toArray = value => (!isEmpty(value) && !isArray(value) ? [value] : value) || [];\nexport const filter = (value, cb) => value.filter(cb || (x => !isEmpty(x)));\n\nexport const format = value => {\n  const xml = String(value)\n    .replace(/^\\s+|\\s+$/g, '')\n    .replace(/></g, '>\\n<')\n    .replace(/\\/(\\w+)></g, '/$1>\\n<')\n    .replace(/>(.+?)<([a-zA-Z])/g, '>\\n$1\\n<$2');\n\n  const output = xml.split('\\n');\n\n  for (let i = 0, tabs = ''; i < output.length; i += 1) {\n    const line = output[i].replace(/^\\s+|\\s+$/g, '');\n\n    if (/^<[/]/.test(line)) {\n      tabs = tabs.replace('  ', '');\n      output[i] = tabs + line;\n    } else if (/<.*>.*<\\/.*>|<.*[^>]\\/>/.test(line)) {\n      output[i] = tabs + line;\n    } else {\n      output[i] = tabs + line;\n      tabs += '  ';\n    }\n  }\n\n  return output.join('\\n');\n};\n\nexport const trim = value => {\n  const matches = value.match(/\\n( )*/);\n  const spaces = matches[0].substr(0, matches[0].length - 1);\n  const depth = spaces.split('').length;\n\n  return value.replace(new RegExp(`^ {${depth}}`, 'mg'), '').trim();\n};\n\nexport const zipMap = (a, b, cb) => Array.from({ length: Math.max(a.length, b.length) }).map((_, i) => cb(a[i], b[i], i));\nexport const apply = (cb, length, options = {}) => (...args) => length === args.length && cb(...args, options);\nexport const raf = cb => ((typeof window !== 'undefined' && window.requestAnimationFrame) || setTimeout)(cb);\n\nexport const replace = (target, node, i) => target.replaceChild(node, target.childNodes[i]);\nexport const remove = (target, node) => target && target.removeChild(node);\nexport const append = (target, node) => target.appendChild(node);\nexport const detach = target => remove(target.parentNode, target);\n","import {\n  isEmpty, isObject, isFunction, isScalar, isDiff, isNode, isArray, toArray,\n} from './util';\n\nexport const XLINK_NS = 'http://www.w3.org/1999/xlink';\nexport const ELEM_REGEX = /(\\w*)(#\\w+)?([\\w.]+)?/;\n\nexport function fixTree(vnode) {\n  vnode = isNode(vnode) && isFunction(vnode[0])\n    ? fixTree(vnode[0](vnode[1], toArray(vnode[2])))\n    : vnode;\n\n  if (isArray(vnode[2])) {\n    vnode[2].forEach((sub, i) => {\n      if (isNode(sub)) {\n        vnode[2][i] = fixTree(sub);\n      }\n    });\n  }\n\n  return vnode;\n}\n\nexport function fixProps(vnode) {\n  if (isArray(vnode[1]) || isScalar(vnode[1])) {\n    vnode[2] = vnode[1];\n    vnode[1] = null;\n  }\n\n  if (isFunction(vnode[0])) {\n    vnode = fixProps(vnode[0](vnode[1], toArray(vnode[2])));\n  }\n\n  if (!isNode(vnode)) throw new Error(`Invalid vnode, given '${vnode}'`);\n\n  let attrs = vnode[1] || null;\n  let name = vnode[0];\n\n  if (typeof name === 'string') {\n    const matches = name.match(ELEM_REGEX);\n\n    attrs = { ...attrs };\n    name = matches[1] || ((matches[2] || matches[3]) ? 'div' : null);\n\n    if (matches[2]) {\n      attrs.id = matches[2].substr(1);\n    }\n\n    if (matches[3]) {\n      const classes = matches[3].substr(1).split('.');\n\n      if (isObject(attrs.class)) {\n        classes.forEach(x => { attrs.class[x] = 1; });\n      } else if (isArray(attrs.class) || isScalar(attrs.class)) {\n        attrs.class = !isArray(attrs.class) ? attrs.class.split(' ') : attrs.class;\n        attrs.class = classes.concat(attrs.class).reduce((prev, cur) => {\n          if (prev.indexOf(cur) === -1) prev.push(cur);\n          return prev;\n        }, []);\n      } else {\n        attrs.class = classes;\n      }\n    }\n  }\n\n  return [name, attrs, toArray(vnode[2])];\n}\n\nexport function assignProps(target, attrs, svg, cb) {\n  Object.keys(attrs).forEach(prop => {\n    if (prop === 'key' || isObject(attrs[prop])) {\n      attrs[prop] = (isFunction(cb) && cb(target, prop, attrs[prop])) || null;\n\n      if (prop === 'key') return;\n    }\n\n    const removed = isEmpty(attrs[prop]);\n    const value = attrs[prop] === true ? prop : attrs[prop];\n    const name = prop.replace(/^xlink:?/, '');\n\n    if (svg && prop !== name) {\n      if (removed) target.removeAttributeNS(XLINK_NS, name);\n      else target.setAttributeNS(XLINK_NS, name, value);\n      return;\n    }\n\n    if (removed) target.removeAttribute(prop);\n    else target.setAttribute(prop, value);\n  });\n}\n\nexport function updateProps(target, prev, next, svg, cb) {\n  let changed;\n\n  const keys = Object.keys(prev).concat(Object.keys(next));\n  const props = keys.reduce((all, k) => {\n    if (k in prev && !(k in next)) {\n      all[k] = null;\n      changed = true;\n    } else if (isDiff(prev[k], next[k])) {\n      all[k] = next[k];\n      changed = true;\n    }\n\n    return all;\n  }, {});\n\n  if (changed) assignProps(target, props, svg, cb);\n\n  return changed;\n}\n","import {\n  isFunction, isScalar, isNode, isEmpty, isUndef, isDiff, append, replace, detach, zipMap,\n} from './util';\n\nimport {\n  assignProps, updateProps, fixProps, fixTree,\n} from './attrs';\n\nexport const SVG_NS = 'http://www.w3.org/2000/svg';\n\nexport function destroyElement(target, wait = cb => cb()) {\n  return Promise.resolve().then(() => wait(() => target.remove()));\n}\n\nexport function createElement(value, svg, cb) {\n  if (isScalar(value)) return document.createTextNode(value);\n  if (isUndef(value)) throw new TypeError(`Empty or invalid node, given '${value}'`);\n  if (!isNode(value)) return;\n\n  const [tag, attrs, children] = fixProps([...value]);\n  const isSvg = svg || tag === 'svg';\n\n  let el = isSvg\n    ? document.createElementNS(SVG_NS, tag)\n    : document.createElement(tag);\n\n  if (isFunction(cb)) {\n    el = cb(el, tag, attrs, children) || el;\n  }\n\n  if (isFunction(el)) return createElement(el(), isSvg, cb);\n  if (!isEmpty(attrs)) assignProps(el, attrs, isSvg, cb);\n  if (isFunction(el.oncreate)) el.oncreate(el);\n  if (isFunction(el.enter)) el.enter();\n\n  el.remove = () => Promise.resolve()\n    .then(() => isFunction(el.ondestroy) && el.ondestroy(el))\n    .then(() => isFunction(el.teardown) && el.teardown())\n    .then(() => isFunction(el.exit) && el.exit())\n    .then(() => detach(el));\n\n  children.forEach(vnode => {\n    if (!isEmpty(vnode)) el.appendChild(createElement(vnode, isSvg, cb));\n  });\n\n  return el;\n}\n\nexport function mountElement(target, view, cb = createElement) {\n  if (typeof view === 'function') {\n    cb = view;\n    view = target;\n    target = undefined;\n  }\n\n  if (!view) {\n    view = target;\n    target = undefined;\n  }\n\n  if (!target) {\n    target = document.body;\n  }\n\n  if (typeof target === 'string') {\n    target = document.querySelector(target);\n  }\n\n  const el = isScalar(view) || isNode(view) ? cb(view) : view;\n\n  append(target, el);\n\n  return el;\n}\n\nexport function updateElement(target, prev, next, svg, cb, i = 0) {\n  if (i === null) {\n    const a = fixProps([...prev]);\n    const b = fixProps([...next]);\n\n    if (updateProps(target, a[1], b[1], svg, cb)) {\n      if (isFunction(target.onupdate)) target.onupdate(target);\n      if (isFunction(target.update)) target.update();\n    }\n\n    zipMap(a[2], b[2], (x, y, z) => updateElement(target, x, y, svg, cb, z));\n  } else if (isScalar(prev) && isScalar(next)) {\n    if (isDiff(prev, next)) {\n      target.childNodes[i].nodeValue = next;\n    }\n  } else if (!prev && next) append(target, createElement(next, svg, cb));\n  else if (prev && !next) destroyElement(target.childNodes[i]);\n  else if (prev[0] !== next[0]) {\n    if (isNode(prev) && isNode(next)) replace(target, createElement(next, svg, cb), i);\n    else zipMap(prev, next, (x, y, z) => updateElement(target, x, y, svg, cb, z));\n  } else updateElement(target.childNodes[i], prev, next, svg, cb, null);\n}\n\nexport function createView(tag, state, actions) {\n  return (el, cb = createElement) => {\n    const data = { ...state };\n\n    let childNode;\n    let vnode;\n\n    const $ = Object.keys(actions)\n      .reduce((prev, cur) => {\n        prev[cur] = (...args) => Promise.resolve()\n          .then(() => actions[cur](...args)(data))\n          .then(result => Object.assign(data, result))\n          .then(newData => {\n            updateElement(childNode, vnode, vnode = fixTree(tag(newData, $)), null, cb, null);\n          });\n\n        return prev;\n      }, {});\n\n    childNode = mountElement(el, vnode = fixTree(tag(data, $)), cb);\n\n    $.unmount = () => destroyElement(childNode);\n    $.target = childNode;\n\n    return $;\n  };\n}\n","import {\n  dashCase, isFunction, isObject, isScalar, isArray, isUndef, filter, raf,\n} from './util';\n\nexport function values(attrs, cb) {\n  if (isUndef(attrs)) return [];\n  if (!isObject(attrs)) return attrs;\n  if (isArray(attrs)) return filter(attrs);\n\n  return filter(Object.keys(attrs).reduce((prev, cur) => {\n    if (!isUndef(attrs[cur])) prev.push(cb(attrs[cur], cur));\n\n    return prev;\n  }, []));\n}\n\nexport function styles(props) {\n  return values(props, (v, k) => `${dashCase(k)}: ${v}`, '; ');\n}\n\nexport function classes(props) {\n  return values(props, (v, k) => (v ? k : undefined));\n}\n\nexport function datasets(el, name, props) {\n  if (isArray(props)) {\n    el.setAttribute(`data-${name}`, JSON.stringify(props));\n  } else {\n    Object.keys(props).forEach(key => {\n      const value = !isScalar(props[key])\n        ? JSON.stringify(props[key])\n        : props[key];\n\n      el.setAttribute(`data-${name}-${key}`, value);\n    });\n  }\n}\n\nexport function nextProps(el, type, names) {\n  return () => new Promise(resolve => {\n    let t;\n\n    function onEnd() {\n      el.removeEventListener('animationend', onEnd);\n\n      names.map(x => el.classList.remove(x));\n\n      clearTimeout(t);\n      resolve();\n    }\n\n    t = setTimeout(onEnd, 500);\n\n    el.addEventListener('animationend', onEnd);\n\n    raf(() => { names.map(x => el.classList.add(x)); });\n  });\n}\n\nexport function invokeProps(el, name, value, helpers) {\n  if (isObject(helpers)) {\n    if (isFunction(helpers)) return helpers(value, name, el);\n    if (isFunction(helpers[name])) return helpers[name](value, name, el);\n  }\n\n  if (isObject(value)) datasets(el, name, value);\n}\n\nexport const applyStyles = value => styles(value).join('; ');\nexport const applyClasses = value => classes(value).join(' ');\nexport const applyAnimations = (value, name, el) => { el[name] = nextProps(el, name, classes(value)); };\n","import { isFunction, isObject } from './util';\n\nexport const EE_SUPPORTED = ['oncreate', 'onupdate', 'ondestroy'];\n\nexport function eventListener(e) {\n  return e.currentTarget.events[e.type](e);\n}\n\nexport function invokeEvent(e, name, value, globals) {\n  let skip;\n\n  if (isObject(globals)) {\n    if (isFunction(globals)) {\n      skip = globals(name, e) === false;\n    } else if (isFunction(globals[name])) {\n      skip = globals[name](e) === false;\n    }\n  }\n\n  if (!skip) value(e);\n}\n\nexport function addEvents(el, name, value, globals) {\n  if (isFunction(value)) {\n    el.events = el.events || {};\n\n    if (!el.teardown) {\n      el.teardown = () => Object.keys(el.events).map(x => el.removeEventListener(x, eventListener));\n    }\n\n    if (name.substr(0, 2) === 'on' && EE_SUPPORTED.indexOf(name) === -1) {\n      const type = name.substr(2);\n\n      if (!el.events[type]) el.addEventListener(type, eventListener, false);\n\n      el.events[type] = e => invokeEvent(e, name, value, globals);\n    } else {\n      (EE_SUPPORTED.indexOf(name) > -1 ? el : el.events)[name] = value;\n    }\n  }\n}\n","import {\n  createView as view,\n  mountElement as mount,\n  updateElement as patch,\n  createElement as render,\n  destroyElement as unmount,\n} from './lib/node';\n\nimport {\n  invokeProps,\n  applyStyles as styles,\n  applyClasses as classes,\n  applyAnimations as animation,\n} from './lib/props';\n\nimport {\n  apply, format, filter, isFunction,\n} from './lib/util';\n\nimport { addEvents } from './lib/events';\n\nexport const h = (name = 'div', attrs, ...children) => [name, attrs, children];\n\nexport const pre = (vnode, svg, cb = render) => {\n  return cb(['pre', { class: 'highlight' }, format(cb(vnode, svg).outerHTML)], svg);\n};\n\nexport const bind = (tag, ...hooks) => {\n  const cbs = filter(hooks, isFunction);\n\n  const mix = (...args) => {\n    return cbs.reduce((prev, cb) => cb(...args) || prev, undefined);\n  };\n\n  return (...args) => (args.length <= 2 ? tag(args[0], args[1], mix) : mix(...args));\n};\n\nexport const listeners = opts => apply(addEvents, 3, opts);\nexport const attributes = opts => apply(invokeProps, 3, opts);\n\nexport {\n  createView as view,\n  mountElement as mount,\n  updateElement as patch,\n  createElement as render,\n  destroyElement as unmount,\n} from './lib/node';\n\nexport {\n  applyStyles as styles,\n  applyClasses as classes,\n  applyAnimations as animation,\n} from './lib/props';\n\nexport default {\n  h,\n  pre,\n  bind,\n\n  view,\n  mount,\n  patch,\n  render,\n  unmount,\n\n  listeners,\n  attributes,\n\n  styles,\n  classes,\n  animation,\n};\n","import somedom, { mount, render } from '../../src';\nimport { trim as format } from '../../src/lib/util';\n\nfunction summarize(script) {\n  const { innerHTML, parentNode } = script;\n\n  const code = innerHTML\n    .replace(/( +)appendChild\\(([^;]*?)\\);?/gm, '$1$2')\n    .replace(/test\\(\\s*\\([^=()]*\\)\\s*=>\\s*\\{/, '')\n    .replace(/\\}\\)\\s*;$/, '');\n\n  mount(parentNode, ['details', [\n    ['summary', 'View executed code'],\n    ['pre', { class: 'highlight' }, format(code)],\n  ]]);\n}\n\nfunction appendChild(currentScript, newNode) {\n  const { loaded, parentNode } = currentScript;\n\n  if (!loaded) {\n    summarize(currentScript);\n\n    currentScript.loaded = true;\n  }\n\n  if (newNode) {\n    parentNode.insertBefore(newNode, currentScript);\n  }\n\n  return newNode;\n}\n\nconst tests = [];\n\nwindow.test = cb => {\n  tests.push({\n    cb,\n    el: document.currentScript,\n  });\n};\n\nwindow.addEventListener('DOMContentLoaded', () => {\n  tests.forEach(t => {\n    try {\n      t.cb(somedom, x => appendChild(t.el, x));\n    } catch (e) {\n      appendChild(t.el, render(['div', { class: 'error' }, e.toString()]));\n    }\n  });\n\n  window.hijs = '.highlight';\n\n  mount('head', ['script', { src: '//cdn.rawgit.com/cloudhead/hijs/0eaa0031/hijs.js' }]);\n});\n"],"names":["const","isArray","value","Array","isFunction","isUndef","isObject","isScalar","isDiff","prev","next","length","some","x","indexOf","a","Object","keys","sort","b","let","i","isEmpty","isNode","dashCase","replace","toLowerCase","toArray","filter","cb","trim","matches","match","depth","substr","split","RegExp","zipMap","from","Math","max","map","_","apply","options","args","raf","window","requestAnimationFrame","setTimeout","target","node","replaceChild","childNodes","append","appendChild","detach","removeChild","remove","parentNode","ELEM_REGEX","fixTree","vnode","forEach","sub","fixProps","Error","attrs","name","id","classes","class","concat","reduce","cur","push","assignProps","svg","prop","removed","removeAttributeNS","XLINK_NS","setAttributeNS","removeAttribute","setAttribute","SVG_NS","destroyElement","wait","Promise","resolve","then","createElement","document","createTextNode","TypeError","isSvg","tag","el","createElementNS","children","oncreate","enter","ondestroy","teardown","exit","mountElement","view","undefined","body","querySelector","updateElement","changed","props","all","k","updateProps","onupdate","update","y","z","nodeValue","values","v","invokeProps","helpers","JSON","stringify","key","datasets","EE_SUPPORTED","eventListener","e","currentTarget","events","type","addEvents","globals","removeEventListener","addEventListener","skip","invokeEvent","render","output","String","tabs","line","test","join","format","outerHTML","cbs","hooks","mix","state","actions","childNode","data","$","result","assign","newData","unmount","mount","patch","opts","names","t","onEnd","classList","clearTimeout","add","nextProps","currentScript","newNode","loaded","script","code","innerHTML","summarize","insertBefore","tests","somedom","toString","hijs","src"],"mappings":"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"}